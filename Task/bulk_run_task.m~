%% Create many many stimuli :)

cd /home/sakkol/Documents/Speech_Perception_stim/02nd_Generation/GoogleTTS_M_0.9
speech_files = dir('*.wav');

cfg=[];
cfg.SNR = -4;
cfg.prespeech.part1.length=0.5;
cfg.prespeech.part1.noise = 'pink';
cfg.prespeech.part2.length = 2;
cfg.prespeech.part2.noise = 'pink';
cfg.prespeech.part2.signal = '/home/sakkol/Documents/Speech_Perception_stim/02nd_Generation/Pre-stim-Attention-comma-M.wav';

cfg.speech.noise = 'pink';
cfg.postspeech.part1.length=2;
cfg.postspeech.part1.noise = 'pink';
cfg.LvsR = 'L';
cfg.stim_save_filename = 'HBML/Desktop/stimuli001.wav';
cfg.plot_save_filename = 'HBML/Desktop/stimuli001.jpeg';

for s=1:length(speech_files)
    cfg.speech.file = [speech_files(s).folder filesep speech_files(s).name];
    
    curr_sentence = erase(speech_files(s).name,'.wav');
    cfg.stim_save_filename = [filesep curr_sentence '.wav'];
    cfg.envelope_save_filename
    
[stimulus,envelope]=stimuli_creator(cfg);